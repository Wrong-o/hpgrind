{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{ResponsiveContainer,Tooltip,Rectangle,XAxis,YAxis,ScatterChart,Scatter}from'recharts';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const api=axios.create({baseURL:process.env.REACT_APP_API_URL,withCredentials:true});const HeatMap=()=>{const[heatmapData,setHeatmapData]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const containerRef=useRef(null);useEffect(()=>{const fetchHeatmapData=async()=>{try{setLoading(true);const response=await api.get('/get-user-heatmap');console.log('API response:',response.data);const formattedData=response.data.map(item=>({x:parseInt(item.x),y:parseInt(item.y),value:item.correct_rate==='-'?null:parseFloat(item.correct_rate)}));setHeatmapData(formattedData);console.log('Formatted data:',formattedData);}catch(error){console.error(\"Error fetching heatmap data:\",error);setError(error.message);}finally{setLoading(false);}};fetchHeatmapData();},[]);const getColor=value=>{if(value===null)return'#000000';// Color for no data\nconst red=Math.floor(255*(1-value));const green=Math.floor(255*value);return`rgb(${red},${green},0)`;// Gradient from red to green\n};const CustomizedShape=props=>{const{x,y,width,height,value}=props;return/*#__PURE__*/_jsx(Rectangle,{x:x,y:y,width:width,height:height,fill:getColor(value)});};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading heatmap data...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Error loading heatmap: \",error]});}if(heatmapData.length===0){return/*#__PURE__*/_jsx(\"div\",{children:\"No heatmap data available.\"});}return/*#__PURE__*/_jsx(\"div\",{ref:containerRef,style:{width:'100%',height:'400px'},children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(ScatterChart,{margin:{top:20,right:20,bottom:20,left:20},children:[/*#__PURE__*/_jsx(XAxis,{type:\"number\",dataKey:\"x\",name:\"x\",unit:\"\",domain:[0,10],ticks:[1,2,3,4,5,6,7,8,9,10]}),/*#__PURE__*/_jsx(YAxis,{type:\"number\",dataKey:\"y\",name:\"y\",unit:\"\",domain:[0,10],ticks:[1,2,3,4,5,6,7,8,9,10]}),/*#__PURE__*/_jsx(Tooltip,{cursor:{strokeDasharray:'3 3'},content:_ref=>{let{payload}=_ref;if(payload&&payload.length){const data=payload[0].payload;return/*#__PURE__*/_jsxs(\"div\",{className:\"custom-tooltip bg-white p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"p\",{children:`X: ${data.x}, Y: ${data.y}`}),/*#__PURE__*/_jsx(\"p\",{children:`Correct Rate: ${data.value!==null?data.value.toFixed(2):'N/A'}`})]});}return null;}}),/*#__PURE__*/_jsx(Scatter,{data:heatmapData,shape:/*#__PURE__*/_jsx(CustomizedShape,{}),isAnimationActive:false})]})})});};export default HeatMap;","map":{"version":3,"names":["React","useState","useEffect","useRef","ResponsiveContainer","Tooltip","Rectangle","XAxis","YAxis","ScatterChart","Scatter","axios","jsx","_jsx","jsxs","_jsxs","api","create","baseURL","process","env","REACT_APP_API_URL","withCredentials","HeatMap","heatmapData","setHeatmapData","loading","setLoading","error","setError","containerRef","fetchHeatmapData","response","get","console","log","data","formattedData","map","item","x","parseInt","y","value","correct_rate","parseFloat","message","getColor","red","Math","floor","green","CustomizedShape","props","width","height","fill","children","length","ref","style","margin","top","right","bottom","left","type","dataKey","name","unit","domain","ticks","cursor","strokeDasharray","content","_ref","payload","className","toFixed","shape","isAnimationActive"],"sources":["C:/Users/jayb/Desktop/blogg/react/frontend/src/components/HeatMap.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { ResponsiveContainer, Tooltip, Rectangle, XAxis, YAxis, ScatterChart, Scatter } from 'recharts';\r\nimport axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL,\r\n  withCredentials: true,\r\n});\r\n\r\nconst HeatMap = () => {\r\n  const [heatmapData, setHeatmapData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const containerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const fetchHeatmapData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await api.get('/get-user-heatmap');\r\n        console.log('API response:', response.data);\r\n        const formattedData = response.data.map(item => ({\r\n          x: parseInt(item.x),\r\n          y: parseInt(item.y),\r\n          value: item.correct_rate === '-' ? null : parseFloat(item.correct_rate)\r\n        }));\r\n        setHeatmapData(formattedData);\r\n        console.log('Formatted data:', formattedData);\r\n      } catch (error) {\r\n        console.error(\"Error fetching heatmap data:\", error);\r\n        setError(error.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchHeatmapData();\r\n  }, []);\r\n\r\n  const getColor = (value) => {\r\n    if (value === null) return '#000000'; // Color for no data\r\n    const red = Math.floor(255 * (1 - value));\r\n    const green = Math.floor(255 * value);\r\n    return `rgb(${red},${green},0)`; // Gradient from red to green\r\n  };\r\n\r\n  const CustomizedShape = (props) => {\r\n    const { x, y, width, height, value } = props;\r\n    return (\r\n      <Rectangle\r\n        x={x}\r\n        y={y}\r\n        width={width}\r\n        height={height}\r\n        fill={getColor(value)}\r\n      />\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Loading heatmap data...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div>Error loading heatmap: {error}</div>;\r\n  }\r\n\r\n  if (heatmapData.length === 0) {\r\n    return <div>No heatmap data available.</div>;\r\n  }\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ width: '100%', height: '400px' }}>\r\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n        <ScatterChart\r\n          margin={{\r\n            top: 20,\r\n            right: 20,\r\n            bottom: 20,\r\n            left: 20,\r\n          }}\r\n        >\r\n          <XAxis type=\"number\" dataKey=\"x\" name=\"x\" unit=\"\" domain={[0, 10]} ticks={[1,2,3,4,5,6,7,8,9,10]} />\r\n          <YAxis type=\"number\" dataKey=\"y\" name=\"y\" unit=\"\" domain={[0, 10]} ticks={[1,2,3,4,5,6,7,8,9,10]} />\r\n          <Tooltip \r\n            cursor={{ strokeDasharray: '3 3' }}\r\n            content={({ payload }) => {\r\n              if (payload && payload.length) {\r\n                const data = payload[0].payload;\r\n                return (\r\n                  <div className=\"custom-tooltip bg-white p-2 border border-gray-300 rounded\">\r\n                    <p>{`X: ${data.x}, Y: ${data.y}`}</p>\r\n                    <p>{`Correct Rate: ${data.value !== null ? data.value.toFixed(2) : 'N/A'}`}</p>\r\n                  </div>\r\n                );\r\n              }\r\n              return null;\r\n            }}\r\n          />\r\n          <Scatter \r\n            data={heatmapData} \r\n            shape={<CustomizedShape />} \r\n            isAnimationActive={false}\r\n          />\r\n        </ScatterChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HeatMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}