{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ResponsiveContainer,XAxis,YAxis,Tooltip}from'recharts';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const api=axios.create({baseURL:process.env.REACT_APP_API_URL,withCredentials:true});const HeatMap=()=>{const[data,setData]=useState([]);useEffect(()=>{const fetchHeatmapData=async()=>{try{const response=await api.get('/get-user-heatmap');const processedData=response.data.map(item=>({x:item.x,y:item.y,value:item.correct_rate==='-'?null:parseFloat(item.correct_rate)}));setData(processedData);}catch(error){console.error(\"Error fetching heatmap data:\",error);}};fetchHeatmapData();},[]);const CustomTooltip=_ref=>{let{active,payload}=_ref;if(active&&payload&&payload.length){const{x,y,value}=payload[0].payload;return/*#__PURE__*/_jsxs(\"div\",{className:\"custom-tooltip bg-white text-black p-2 rounded shadow\",children:[/*#__PURE__*/_jsx(\"p\",{children:`${x} x ${y} = ${x*y}`}),/*#__PURE__*/_jsx(\"p\",{children:value!==null?`Correct: ${(value*100).toFixed(1)}%`:'No data'})]});}return null;};const colorScale=value=>{if(value===null)return'#f0f0f0';// Light gray for no data\nconst hue=(value*120).toString(10);return`hsl(${hue}, 80%, 50%)`;};const cellSize=40;const margin={top:20,right:20,bottom:30,left:30};return/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:500,children:/*#__PURE__*/_jsx(\"svg\",{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(\"g\",{transform:`translate(${margin.left},${margin.top})`,children:[data.map(item=>/*#__PURE__*/_jsx(\"rect\",{x:(item.x-1)*cellSize,y:(item.y-1)*cellSize,width:cellSize,height:cellSize,fill:colorScale(item.value),stroke:\"#fff\",strokeWidth:1,children:/*#__PURE__*/_jsx(\"title\",{children:`${item.x} x ${item.y} = ${item.x*item.y}\n${item.value!==null?`Correct: ${(item.value*100).toFixed(1)}%`:'No data'}`})},`cell-${item.x}-${item.y}`)),[...Array(10)].map((_,i)=>/*#__PURE__*/_jsx(\"text\",{x:(i+0.5)*cellSize,y:10*cellSize+20,textAnchor:\"middle\",fill:\"#333\",children:i+1},`x-label-${i+1}`)),[...Array(10)].map((_,i)=>/*#__PURE__*/_jsx(\"text\",{x:-10,y:(i+0.5)*cellSize,textAnchor:\"end\",alignmentBaseline:\"middle\",fill:\"#333\",children:i+1},`y-label-${i+1}`))]})})});};export default HeatMap;","map":{"version":3,"names":["React","useState","useEffect","ResponsiveContainer","XAxis","YAxis","Tooltip","axios","jsx","_jsx","jsxs","_jsxs","api","create","baseURL","process","env","REACT_APP_API_URL","withCredentials","HeatMap","data","setData","fetchHeatmapData","response","get","processedData","map","item","x","y","value","correct_rate","parseFloat","error","console","CustomTooltip","_ref","active","payload","length","className","children","toFixed","colorScale","hue","toString","cellSize","margin","top","right","bottom","left","width","height","transform","fill","stroke","strokeWidth","Array","_","i","textAnchor","alignmentBaseline"],"sources":["C:/Users/jayb/Desktop/blogg/react/frontend/src/components/HeatMap.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { ResponsiveContainer, XAxis, YAxis, Tooltip } from 'recharts';\r\nimport axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL,\r\n  withCredentials: true,\r\n});\r\n\r\nconst HeatMap = () => {\r\n  const [data, setData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchHeatmapData = async () => {\r\n      try {\r\n        const response = await api.get('/get-user-heatmap');\r\n        const processedData = response.data.map(item => ({\r\n          x: item.x,\r\n          y: item.y,\r\n          value: item.correct_rate === '-' ? null : parseFloat(item.correct_rate)\r\n        }));\r\n        setData(processedData);\r\n      } catch (error) {\r\n        console.error(\"Error fetching heatmap data:\", error);\r\n      }\r\n    };\r\n\r\n    fetchHeatmapData();\r\n  }, []);\r\n\r\n  const CustomTooltip = ({ active, payload }) => {\r\n    if (active && payload && payload.length) {\r\n      const { x, y, value } = payload[0].payload;\r\n      return (\r\n        <div className=\"custom-tooltip bg-white text-black p-2 rounded shadow\">\r\n          <p>{`${x} x ${y} = ${x * y}`}</p>\r\n          <p>{value !== null ? `Correct: ${(value * 100).toFixed(1)}%` : 'No data'}</p>\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const colorScale = (value) => {\r\n    if (value === null) return '#f0f0f0'; // Light gray for no data\r\n    const hue = ((value) * 120).toString(10);\r\n    return `hsl(${hue}, 80%, 50%)`;\r\n  };\r\n\r\n  const cellSize = 40;\r\n  const margin = { top: 20, right: 20, bottom: 30, left: 30 };\r\n\r\n  return (\r\n    <ResponsiveContainer width=\"100%\" height={500}>\r\n      <svg width=\"100%\" height=\"100%\">\r\n        <g transform={`translate(${margin.left},${margin.top})`}>\r\n          {data.map((item) => (\r\n            <rect\r\n              key={`cell-${item.x}-${item.y}`}\r\n              x={(item.x - 1) * cellSize}\r\n              y={(item.y - 1) * cellSize}\r\n              width={cellSize}\r\n              height={cellSize}\r\n              fill={colorScale(item.value)}\r\n              stroke=\"#fff\"\r\n              strokeWidth={1}\r\n            >\r\n              <title>{`${item.x} x ${item.y} = ${item.x * item.y}\r\n${item.value !== null ? `Correct: ${(item.value * 100).toFixed(1)}%` : 'No data'}`}</title>\r\n            </rect>\r\n          ))}\r\n          {[...Array(10)].map((_, i) => (\r\n            <text\r\n              key={`x-label-${i + 1}`}\r\n              x={(i + 0.5) * cellSize}\r\n              y={10 * cellSize + 20}\r\n              textAnchor=\"middle\"\r\n              fill=\"#333\"\r\n            >\r\n              {i + 1}\r\n            </text>\r\n          ))}\r\n          {[...Array(10)].map((_, i) => (\r\n            <text\r\n              key={`y-label-${i + 1}`}\r\n              x={-10}\r\n              y={(i + 0.5) * cellSize}\r\n              textAnchor=\"end\"\r\n              alignmentBaseline=\"middle\"\r\n              fill=\"#333\"\r\n            >\r\n              {i + 1}\r\n            </text>\r\n          ))}\r\n        </g>\r\n      </svg>\r\n    </ResponsiveContainer>\r\n  );\r\n};\r\n\r\nexport default HeatMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}