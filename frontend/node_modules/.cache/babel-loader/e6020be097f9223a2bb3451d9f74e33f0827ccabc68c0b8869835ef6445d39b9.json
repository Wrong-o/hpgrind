{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ScatterChart,Scatter,XAxis,YAxis,ZAxis,Tooltip,ResponsiveContainer}from'recharts';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const api=axios.create({baseURL:process.env.REACT_APP_API_URL,withCredentials:true});const HeatMap=()=>{const[data,setData]=useState([]);useEffect(()=>{const fetchHeatmapData=async()=>{try{const response=await api.get('/get-user-heatmap');const processedData=response.data.map(item=>({x:item.x,y:item.y,z:item.correct_rate==='-'?0:Math.round(item.correct_rate*100)})).filter(item=>item.z>0);// Remove items with 0 correct rate\nsetData(processedData);}catch(error){console.error(\"Error fetching heatmap data:\",error);}};fetchHeatmapData();},[]);const CustomTooltip=_ref=>{let{active,payload}=_ref;if(active&&payload&&payload.length){const{x,y,z}=payload[0].payload;return/*#__PURE__*/_jsxs(\"div\",{className:\"custom-tooltip bg-white text-black p-2 rounded shadow\",children:[/*#__PURE__*/_jsx(\"p\",{children:`${x} x ${y} = ${x*y}`}),/*#__PURE__*/_jsx(\"p\",{children:`Correct: ${z}%`})]});}return null;};const colorScale=value=>{const hue=((1-value/100)*120).toString(10);return[`hsl(${hue}, 100%, 50%)`,'rgba(255, 255, 255, 0.5)'];};return/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:400,children:/*#__PURE__*/_jsxs(ScatterChart,{margin:{top:20,right:20,bottom:20,left:20},children:[/*#__PURE__*/_jsx(XAxis,{type:\"number\",dataKey:\"x\",name:\"x\",domain:[1,10],ticks:[1,2,3,4,5,6,7,8,9,10]}),/*#__PURE__*/_jsx(YAxis,{type:\"number\",dataKey:\"y\",name:\"y\",domain:[1,10],ticks:[1,2,3,4,5,6,7,8,9,10]}),/*#__PURE__*/_jsx(ZAxis,{type:\"number\",dataKey:\"z\",range:[10,1000]}),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(CustomTooltip,{})}),/*#__PURE__*/_jsx(Scatter,{data:data,fill:\"#8884d8\",shape:\"circle\",fillOpacity:0.8,children:data.map((entry,index)=>/*#__PURE__*/_jsx(\"cell\",{fill:colorScale(entry.z)[0]},`cell-${index}`))})]})});};export default HeatMap;","map":{"version":3,"names":["React","useState","useEffect","ScatterChart","Scatter","XAxis","YAxis","ZAxis","Tooltip","ResponsiveContainer","axios","jsx","_jsx","jsxs","_jsxs","api","create","baseURL","process","env","REACT_APP_API_URL","withCredentials","HeatMap","data","setData","fetchHeatmapData","response","get","processedData","map","item","x","y","z","correct_rate","Math","round","filter","error","console","CustomTooltip","_ref","active","payload","length","className","children","colorScale","value","hue","toString","width","height","margin","top","right","bottom","left","type","dataKey","name","domain","ticks","range","content","fill","shape","fillOpacity","entry","index"],"sources":["C:/Users/jayb/Desktop/blogg/react/frontend/src/components/HeatMap.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { ScatterChart, Scatter, XAxis, YAxis, ZAxis, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL,\r\n  withCredentials: true,\r\n});\r\n\r\nconst HeatMap = () => {\r\n  const [data, setData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchHeatmapData = async () => {\r\n      try {\r\n        const response = await api.get('/get-user-heatmap');\r\n        const processedData = response.data.map(item => ({\r\n          x: item.x,\r\n          y: item.y,\r\n          z: item.correct_rate === '-' ? 0 : Math.round(item.correct_rate * 100)\r\n        })).filter(item => item.z > 0); // Remove items with 0 correct rate\r\n        setData(processedData);\r\n      } catch (error) {\r\n        console.error(\"Error fetching heatmap data:\", error);\r\n      }\r\n    };\r\n\r\n    fetchHeatmapData();\r\n  }, []);\r\n\r\n  const CustomTooltip = ({ active, payload }) => {\r\n    if (active && payload && payload.length) {\r\n      const { x, y, z } = payload[0].payload;\r\n      return (\r\n        <div className=\"custom-tooltip bg-white text-black p-2 rounded shadow\">\r\n          <p>{`${x} x ${y} = ${x * y}`}</p>\r\n          <p>{`Correct: ${z}%`}</p>\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const colorScale = (value) => {\r\n    const hue = ((1 - value / 100) * 120).toString(10);\r\n    return [`hsl(${hue}, 100%, 50%)`, 'rgba(255, 255, 255, 0.5)'];\r\n  };\r\n\r\n  return (\r\n    <ResponsiveContainer width=\"100%\" height={400}>\r\n      <ScatterChart margin={{ top: 20, right: 20, bottom: 20, left: 20 }}>\r\n        <XAxis type=\"number\" dataKey=\"x\" name=\"x\" domain={[1, 10]} ticks={[1,2,3,4,5,6,7,8,9,10]} />\r\n        <YAxis type=\"number\" dataKey=\"y\" name=\"y\" domain={[1, 10]} ticks={[1,2,3,4,5,6,7,8,9,10]} />\r\n        <ZAxis type=\"number\" dataKey=\"z\" range={[10, 1000]} />\r\n        <Tooltip content={<CustomTooltip />} />\r\n        <Scatter\r\n          data={data}\r\n          fill=\"#8884d8\"\r\n          shape=\"circle\"\r\n          fillOpacity={0.8}\r\n        >\r\n          {data.map((entry, index) => (\r\n            <cell key={`cell-${index}`} fill={colorScale(entry.z)[0]} />\r\n          ))}\r\n        </Scatter>\r\n      </ScatterChart>\r\n    </ResponsiveContainer>\r\n  );\r\n};\r\n\r\nexport default HeatMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}