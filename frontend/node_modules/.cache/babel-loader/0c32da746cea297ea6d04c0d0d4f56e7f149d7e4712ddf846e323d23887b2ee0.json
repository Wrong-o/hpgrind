{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ResponsiveContainer,Tooltip,Rectangle,XAxis,YAxis,ScatterChart,Scatter}from'recharts';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const api=axios.create({baseURL:process.env.REACT_APP_API_URL,withCredentials:true});const HeatMap=()=>{const[heatmapData,setHeatmapData]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchHeatmapData=async()=>{try{setLoading(true);const response=await api.get('/get-user-heatmap');const formattedData=response.data.map(item=>({x:parseInt(item.x),y:parseInt(item.y),value:item.correct_rate==='-'?null:parseFloat(item.correct_rate)}));setHeatmapData(formattedData);}catch(error){console.error(\"Error fetching heatmap data:\",error);}finally{setLoading(false);}};fetchHeatmapData();},[]);const getColor=value=>{if(value===null)return'#000000';// Color for no data\nconst red=Math.floor(255*(1-value));const green=Math.floor(255*value);return`rgb(${red},${green},0)`;// Gradient from red to green\n};const CustomizedShape=props=>{const{x,y,width,height,value}=props;return/*#__PURE__*/_jsx(Rectangle,{x:x,y:y,width:width,height:height,fill:getColor(value)// Fill color based on value\n});};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading heatmap data...\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-96\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(ScatterChart,{margin:{top:20,right:20,bottom:20,left:20},children:[/*#__PURE__*/_jsx(XAxis,{type:\"number\",dataKey:\"x\",name:\"x\",unit:\"\"}),/*#__PURE__*/_jsx(YAxis,{type:\"number\",dataKey:\"y\",name:\"y\",unit:\"\"}),/*#__PURE__*/_jsx(Tooltip,{cursor:{strokeDasharray:'3 3'},content:_ref=>{let{payload}=_ref;if(payload&&payload.length){const data=payload[0].payload;return/*#__PURE__*/_jsxs(\"div\",{className:\"custom-tooltip bg-white p-2 border border-gray-300 rounded\",children:[/*#__PURE__*/_jsx(\"p\",{children:`X: ${data.x}, Y: ${data.y}`}),/*#__PURE__*/_jsx(\"p\",{children:`Correct Rate: ${data.value!==null?data.value.toFixed(2):'N/A'}`})]});}return null;}}),/*#__PURE__*/_jsx(Scatter,{data:heatmapData,shape:/*#__PURE__*/_jsx(CustomizedShape,{})})]})})});};export default HeatMap;","map":{"version":3,"names":["React","useState","useEffect","ResponsiveContainer","Tooltip","Rectangle","XAxis","YAxis","ScatterChart","Scatter","axios","jsx","_jsx","jsxs","_jsxs","api","create","baseURL","process","env","REACT_APP_API_URL","withCredentials","HeatMap","heatmapData","setHeatmapData","loading","setLoading","fetchHeatmapData","response","get","formattedData","data","map","item","x","parseInt","y","value","correct_rate","parseFloat","error","console","getColor","red","Math","floor","green","CustomizedShape","props","width","height","fill","children","className","margin","top","right","bottom","left","type","dataKey","name","unit","cursor","strokeDasharray","content","_ref","payload","length","toFixed","shape"],"sources":["C:/Users/jayb/Desktop/blogg/react/frontend/src/components/HeatMap.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { ResponsiveContainer, Tooltip, Rectangle, XAxis, YAxis, ScatterChart, Scatter } from 'recharts';\r\nimport axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL,\r\n  withCredentials: true,\r\n});\r\n\r\nconst HeatMap = () => {\r\n  const [heatmapData, setHeatmapData] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchHeatmapData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await api.get('/get-user-heatmap');\r\n        const formattedData = response.data.map(item => ({\r\n          x: parseInt(item.x),\r\n          y: parseInt(item.y),\r\n          value: item.correct_rate === '-' ? null : parseFloat(item.correct_rate)\r\n        }));\r\n        setHeatmapData(formattedData);\r\n      } catch (error) {\r\n        console.error(\"Error fetching heatmap data:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchHeatmapData();\r\n  }, []);\r\n\r\n  const getColor = (value) => {\r\n    if (value === null) return '#000000'; // Color for no data\r\n    const red = Math.floor(255 * (1 - value));\r\n    const green = Math.floor(255 * value);\r\n    return `rgb(${red},${green},0)`; // Gradient from red to green\r\n  };\r\n\r\n  const CustomizedShape = (props) => {\r\n    const { x, y, width, height, value } = props;\r\n    return (\r\n      <Rectangle\r\n        x={x}\r\n        y={y}\r\n        width={width}\r\n        height={height}\r\n        fill={getColor(value)} // Fill color based on value\r\n      />\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return <div>Loading heatmap data...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full h-96\">\r\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n        <ScatterChart\r\n          margin={{\r\n            top: 20,\r\n            right: 20,\r\n            bottom: 20,\r\n            left: 20,\r\n          }}\r\n        >\r\n          <XAxis type=\"number\" dataKey=\"x\" name=\"x\" unit=\"\" />\r\n          <YAxis type=\"number\" dataKey=\"y\" name=\"y\" unit=\"\" />\r\n          <Tooltip \r\n            cursor={{ strokeDasharray: '3 3' }}\r\n            content={({ payload }) => {\r\n              if (payload && payload.length) {\r\n                const data = payload[0].payload;\r\n                return (\r\n                  <div className=\"custom-tooltip bg-white p-2 border border-gray-300 rounded\">\r\n                    <p>{`X: ${data.x}, Y: ${data.y}`}</p>\r\n                    <p>{`Correct Rate: ${data.value !== null ? data.value.toFixed(2) : 'N/A'}`}</p>\r\n                  </div>\r\n                );\r\n              }\r\n              return null;\r\n            }}\r\n          />\r\n          <Scatter data={heatmapData} shape={<CustomizedShape />} />\r\n        </ScatterChart>\r\n      </ResponsiveContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HeatMap;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}